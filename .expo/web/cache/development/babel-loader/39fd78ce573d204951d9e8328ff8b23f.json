{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nexport var RootControllerChanges;\n(function (RootControllerChanges) {\n  RootControllerChanges[RootControllerChanges[\"Insert\"] = 0] = \"Insert\";\n  RootControllerChanges[RootControllerChanges[\"Update\"] = 1] = \"Update\";\n  RootControllerChanges[RootControllerChanges[\"Remove\"] = 2] = \"Remove\";\n})(RootControllerChanges || (RootControllerChanges = {}));\nvar RootController = function () {\n  function RootController() {\n    _classCallCheck(this, RootController);\n    this.siblings = new Set();\n    this.pendingActions = [];\n    this.callback = null;\n  }\n  _createClass(RootController, [{\n    key: \"update\",\n    value: function update(id, element, callback) {\n      if (!this.siblings.has(id)) {\n        this.emit(id, {\n          change: RootControllerChanges.Insert,\n          element: element,\n          updateCallback: callback\n        });\n        this.siblings.add(id);\n      } else {\n        this.emit(id, {\n          change: RootControllerChanges.Update,\n          element: element,\n          updateCallback: callback\n        });\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(id, callback) {\n      if (this.siblings.has(id)) {\n        this.emit(id, {\n          change: RootControllerChanges.Remove,\n          element: null,\n          updateCallback: callback\n        });\n        this.siblings.delete(id);\n      } else if (callback) {\n        callback();\n      }\n    }\n  }, {\n    key: \"setCallback\",\n    value: function setCallback(callback) {\n      this.callback = callback;\n      this.pendingActions.forEach(function (_ref) {\n        var id = _ref.id,\n          action = _ref.action;\n        callback(id, action);\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(id, action) {\n      if (this.callback) {\n        this.callback(id, action);\n      } else {\n        this.pendingActions.push({\n          action: action,\n          id: id\n        });\n      }\n    }\n  }]);\n  return RootController;\n}();\nexport { RootController as default };","map":{"version":3,"mappings":";;AAEA,WAAYA,qBAIX;AAJD,WAAYA,qBAAqB;EAC/BA,qEAAM;EACNA,qEAAM;EACNA,qEAAM;AACR,CAAC,EAJWA,qBAAqB,KAArBA,qBAAqB;AAIhC,IAQoBC,cAAc;EAAnC;IAAA;IACU,aAAQ,GAAgB,IAAIC,GAAG,EAAE;IACjC,mBAAc,GAGjB,EAAE;IACC,aAAQ,GAEL,IAAI;EAmDjB;EAAC;IAAA;IAAA,OAjDQ,gBAAOC,EAAU,EAAEC,OAAkB,EAAEC,QAAqB;MACjE,IAAI,CAAC,IAAI,CAACC,QAAQ,CAACC,GAAG,CAACJ,EAAE,CAAC,EAAE;QAC1B,IAAI,CAACK,IAAI,CAACL,EAAE,EAAE;UACZM,MAAM,EAAET,qBAAqB,CAACU,MAAM;UACpCN,OAAO,EAAPA,OAAO;UACPO,cAAc,EAAEN;SACjB,CAAC;QACF,IAAI,CAACC,QAAQ,CAACM,GAAG,CAACT,EAAE,CAAC;OACtB,MAAM;QACL,IAAI,CAACK,IAAI,CAACL,EAAE,EAAE;UACZM,MAAM,EAAET,qBAAqB,CAACa,MAAM;UACpCT,OAAO,EAAPA,OAAO;UACPO,cAAc,EAAEN;SACjB,CAAC;;IAEN;EAAC;IAAA;IAAA,OAEM,iBAAQF,EAAU,EAAEE,QAAqB;MAC9C,IAAI,IAAI,CAACC,QAAQ,CAACC,GAAG,CAACJ,EAAE,CAAC,EAAE;QACzB,IAAI,CAACK,IAAI,CAACL,EAAE,EAAE;UACZM,MAAM,EAAET,qBAAqB,CAACc,MAAM;UACpCV,OAAO,EAAE,IAAI;UACbO,cAAc,EAAEN;SACjB,CAAC;QACF,IAAI,CAACC,QAAQ,CAACS,MAAM,CAACZ,EAAE,CAAC;OACzB,MAAM,IAAIE,QAAQ,EAAE;QACnBA,QAAQ,EAAE;;IAEd;EAAC;IAAA;IAAA,OAEM,qBACLA,QAA4D;MAE5D,IAAI,CAACA,QAAQ,GAAGA,QAAQ;MACxB,IAAI,CAACW,cAAc,CAACC,OAAO,CAAC,gBAAmB;QAAA,IAAhBd,EAAE,QAAFA,EAAE;UAAEe,MAAM,QAANA,MAAM;QACvCb,QAAQ,CAACF,EAAE,EAAEe,MAAM,CAAC;MACtB,CAAC,CAAC;IACJ;EAAC;IAAA;IAAA,OAEO,cAAKf,EAAU,EAAEe,MAA4B;MACnD,IAAI,IAAI,CAACb,QAAQ,EAAE;QACjB,IAAI,CAACA,QAAQ,CAACF,EAAE,EAAEe,MAAM,CAAC;OAC1B,MAAM;QACL,IAAI,CAACF,cAAc,CAACG,IAAI,CAAC;UACvBD,MAAM,EAANA,MAAM;UACNf,EAAE,EAAFA;SACD,CAAC;;IAEN;EAAC;EAAA;AAAA;AAAA,SA1DkBF,cAAc","names":["RootControllerChanges","RootController","Set","id","element","callback","siblings","has","emit","change","Insert","updateCallback","add","Update","Remove","delete","pendingActions","forEach","action","push"],"sourceRoot":"","sources":["../src/RootController.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}