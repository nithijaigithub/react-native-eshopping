{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport React, { useEffect, useState } from 'react';\nimport AppRegistry from \"react-native-web/dist/exports/AppRegistry\";\nimport ChildrenWrapper from \"./ChildrenWrapper\";\nimport wrapRootComponent from \"./wrapRootComponent\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar siblingWrapper = function siblingWrapper(sibling) {\n  return sibling;\n};\nfunction renderSibling(sibling) {\n  return siblingWrapper(sibling);\n}\nif (!global.__rootSiblingsInjected && !global.__rootSiblingsDisabled) {\n  AppRegistry.setWrapperComponentProvider(function () {\n    return Root;\n  });\n  global.__rootSiblingsInjected = true;\n}\nexport function setSiblingWrapper(wrapper) {\n  siblingWrapper = wrapper;\n}\nvar _wrapRootComponent = wrapRootComponent(ChildrenWrapper, renderSibling),\n  Root = _wrapRootComponent.Root,\n  defaultManager = _wrapRootComponent.manager;\nvar uuid = 0;\nvar managerStack = [defaultManager];\nvar inactiveManagers = new Set();\nfunction getActiveManager() {\n  for (var i = managerStack.length - 1; i >= 0; i--) {\n    var manager = managerStack[i];\n    if (!inactiveManagers.has(manager)) {\n      return manager;\n    }\n  }\n  return defaultManager;\n}\nvar RootSiblingsManager = function () {\n  function RootSiblingsManager(element, callback) {\n    _classCallCheck(this, RootSiblingsManager);\n    this.id = \"root-sibling-\" + (uuid + 1);\n    this.manager = getActiveManager();\n    this.manager.update(this.id, element, callback);\n    uuid++;\n  }\n  _createClass(RootSiblingsManager, [{\n    key: \"update\",\n    value: function update(element, callback) {\n      this.manager.update(this.id, element, callback);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(callback) {\n      this.manager.destroy(this.id, callback);\n    }\n  }]);\n  return RootSiblingsManager;\n}();\nexport { RootSiblingsManager as default };\nexport function RootSiblingParent(props) {\n  var inactive = props.inactive;\n  var _useState = useState(function () {\n      var _wrapRootComponent2 = wrapRootComponent(ChildrenWrapper, renderSibling),\n        parentRoot = _wrapRootComponent2.Root,\n        parentManager = _wrapRootComponent2.manager;\n      managerStack.push(parentManager);\n      if (inactive) {\n        inactiveManagers.add(parentManager);\n      }\n      return {\n        Root: parentRoot,\n        manager: parentManager\n      };\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    sibling = _useState2[0];\n  useEffect(function () {\n    return function () {\n      if (sibling) {\n        var index = managerStack.indexOf(sibling.manager);\n        if (index > 0) {\n          managerStack.splice(index, 1);\n        }\n      }\n    };\n  }, [sibling]);\n  if (inactive && sibling && !inactiveManagers.has(sibling.manager)) {\n    inactiveManagers.add(sibling.manager);\n  } else if (!inactive && sibling && inactiveManagers.has(sibling.manager)) {\n    inactiveManagers.delete(sibling.manager);\n  }\n  var Parent = sibling.Root;\n  return _jsx(Parent, {\n    children: props.children\n  });\n}\nexport function RootSiblingPortal(props) {\n  var _useState3 = useState(function () {\n      return new RootSiblingsManager(null);\n    }),\n    _useState4 = _slicedToArray(_useState3, 1),\n    sibling = _useState4[0];\n  sibling.update(props.children);\n  useEffect(function () {\n    if (sibling) {\n      return function () {\n        return sibling.destroy();\n      };\n    }\n  }, [sibling]);\n  return null;\n}","map":{"version":3,"mappings":"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","names":["React","useEffect","useState","ChildrenWrapper","wrapRootComponent","siblingWrapper","sibling","renderSibling","global","__rootSiblingsInjected","__rootSiblingsDisabled","AppRegistry","setWrapperComponentProvider","Root","setSiblingWrapper","wrapper","defaultManager","manager","uuid","managerStack","inactiveManagers","Set","getActiveManager","i","length","has","RootSiblingsManager","element","callback","id","update","destroy","RootSiblingParent","props","inactive","parentRoot","parentManager","push","add","index","indexOf","splice","delete","Parent","children","RootSiblingPortal"],"sourceRoot":"","sources":["../src/RootSiblingsManager.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}